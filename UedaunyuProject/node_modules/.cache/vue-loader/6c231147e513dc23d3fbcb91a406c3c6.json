{"remainingRequest":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\src\\pages\\TankaSyusei.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\src\\pages\\TankaSyusei.vue","mtime":1603336365423},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603336354440},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\babel-loader\\lib\\index.js","mtime":1603336354165},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603336354440},{"path":"C:\\Users\\takum\\Documents\\hokuriku_tosbac\\Uedaunyu\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\vue-loader\\lib\\index.js","mtime":1603336364622}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// @ is an alias to /src\nimport KeyboardEvents from '@/components/KeyboardEvents.vue'\nimport config from '@/config.js'\nimport url from '@/js/api_url.js'\nimport ElIncrementSearch from '@/components/IncrementSearch.vue'\nexport default {\n    name: 'niukeMonitorList',\n    components: {\n        KeyboardEvents, ElIncrementSearch\n    },\n    data: function () {\n        return {\n            data: {\n                pageNumber: 1,\n                firstForm: {\n                    model: {\n                        syoriKubun: 1,\n                        syouhinCode: \"\",\n                        syouhinName: \"\",\n                        sakuhyouHaniKaisuTop: 0,\n                        sakuhyouHaniKaisuBottom: 99,\n                        sakuhyouHanidateTop: \"\",\n                        sakuhyouHanidateBottom: \"\",\n                    },\n                    validation: {\n                      syoriKubun: [\n                            { required: true, message: '処理区分が入力されていません', trigger: 'blur' },\n                        ],\n                        syouhinCode: [\n                            { required: true, message: '商品区分が入力されていません' },\n                        ],\n                        sakuhyouHaniKaisuTop: [\n                            { required: false, message: '作表範囲(回数)が入力されていません' },\n                        ],\n                        sakuhyouHaniKaisuBottom: [\n                            { required: false, message: '作表範囲(回数)が入力されていません' },\n                        ],\n                        sakuhyouHaniDateTop: [\n                            { required: false, message: '抽出終了日が入力されていません' },\n                        ],\n                        sakuhyouHaniDateBottom: [\n                            { required: false, message: '抽出開始日が入力されていません' },\n                        ]\n\n                    },\n                },\n                year: null,\n                syoriKaisu: 0,\n                updateFlag: 0,\n                size: [\n                ],\n                tokyu: [\n\n                ],\n                hinsyu: [\n\n                ],\n                meisai: [\n\n                ],\n                meisaiIndex: {\n\n                },\n\n\n\n            },\n        }\n    },\n    methods: {\n        keyboardEvent(e) {\n            if (e.keyCode == config.KEY_CODES.F5) {\n                if (this.data.firstForm.syoriKubun == 2) {\n                    this.data.pageNumber = 2;\n                }\n            }\n            if (e.keyCode == config.KEY_CODES.F9) {\n                if (this.data.pageNumber == 1) {\n                    if (this.data.firstForm.syoriKubun == 1) {\n                        this.syukei()\n                    }\n                } else if (this.data.pageNumber == 2) {\n                    this.update();\n                }\n                \n            }\n            if (e.keyCode == config.KEY_CODES.F10) {\n                if (this.data.pageNumber == 1) {\n\n                    if (this.data.firstForm.syoriKubun == 3 || this.data.firstForm.syoriKubun == 4) {\n                        this.print()\n                    }\n                } else if (this.data.pageNumber == 2) {\n                    this.clear();\n                }\n             \n            }\n            if (e.keyCode == config.KEY_CODES.F11) {\n                if (this.data.firstForm.syoriKubun == 3 || this.data.firstForm.syoriKubun == 4) {\n                    this.preview()\n                }\n            }\n            if (e.keyCode == config.KEY_CODES.F12) {\n                this.finish()\n            }\n        },\n       //処理回数の変更、ここでjsonを取ってくる処理\n        syoriKaisuChange: function () {\n\n\n            //axios.get(url.tankaSyusei,\n                //{\n              //      paramProcKbn:1,\n              //      paramNendo: this.data.year,\n              //      paramSyohin: this.data.firstForm.syouhinCode,\n              //      paramKaisu: this.data.syoriKaisu,\n              //      paramHinsyu:this.data.,\n              //      paramTokyu = 1\n              //  })\n              //  .then(response => {\n              //      console.log(response.data);\n              //  })\n              //  .catch(response => console.log(response))\n\n            //※明細の取得\n            this.data.meisai = [\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"1\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"7\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"1\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n                { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"7\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\n\n            ];\n            this.createmeisaiIndex();\n\n            //updateFlagをもとに戻す\n            this.data.updateFlag = 0;\n        },\n        createmeisaiIndex: function () {\n           \n            for (var i in this.data.hinsyu) {\n                var hinsyuCode = this.data.hinsyu[i].Hinsyu\n\n                this.data.meisaiIndex[hinsyuCode] = {};\n\n                for (var k in this.data.tokyu) {\n\n                    var tokyuCode = this.data.tokyu[k].Tokyu\n                    this.data.meisaiIndex[hinsyuCode][tokyuCode] = {};\n\n                    for (var l in this.data.size) {\n                        var sizeCode = this.data.size[l].Size;\n                        this.data.meisaiIndex[hinsyuCode][tokyuCode][sizeCode] = null;\n\n                    }\n\n                }\n            }\n\n            for (var i = 0; i < this.data.meisai.length; i++) {\n\n                var meisai = this.data.meisai[i];\n\n                this.data.meisaiIndex[meisai.Hinsyu][meisai.Tokyu][meisai.Size] = i;\n                    \n                \n\n            }\n\n        },\n        getTokyuTr: function () {\n            var result = [];\n            for (var i in this.data.tokyu) {\n\n                result.push(this.data.tokyu[i]);\n                result.push(this.data.tokyu[i]);\n            }\n            return result;\n        },\n        getMeisaiData: function (hinsyu, tokyu, size) {\n\n            var meisaiIndex = this.data.meisaiIndex[hinsyu][tokyu][size];\n            if (meisaiIndex != null) {\n                return this.data.meisai[meisaiIndex];\n            } else {\n                return null;\n            }\n\n            \n        },\n        updateCheck: function (input) {\n\n            if (this.data.updateFlag == 1) {\n\n                if (!window.confirm(\"変更が保存されていませんがよろしいですか？\")) {\n                    input.blur();\n                }\n            }\n        },\n        syukei: function () {\n            this.$refs['firstForm'].validate((valid) => {\n\n                if (valid) {\n                    if (!window.confirm(\"単価集計を実行しますか？\")) {\n                        return false;\n                    }\n\n\n                    var postArray = {\n                            \"paramProcKbn\": 1,\n                           \"Computername\":\"\",\n                            \"InputTanto\": this.$store.state.login.userCode,\n                            \"InputTantoNm\": this.$store.state.login.userName,\n                            \"PrintFlg\": false,\n                            \"Nendo\": this.data.year,\n                            \"SyohinKbn\": this.data.syouhinCode,\n                            \"SyohinNm\": this.data.syouhinName,\n                            \"Henkobi\": \"2020/09/18\",\n                            \"KaisiKaisu\": \"\",\n                            \"SyuryoKaisu\": \"\",\n                            \"KaisiY\": \"\",\n                            \"KaisiM\": \"\",\n                            \"KaisiD\": \"\",\n                            \"SyuryoY\": \"\",\n                            \"SyuryoM\": \"\",\n                            \"SyuryoD\": \"\"\n                    }\n\n                    axios.post(url.tankaSyusei, postArray)\n                        .then(response => {\n                            console.log(response.data);\n                        })\n                        .catch(response => console.log(response))\n\n                    alert(\"集計処理\");\n\n                } \n            });\n\n\n\n        },\n        afterCreatedData: function () {\n\n            if (this.data.size.length != 0 && this.data.hinsyu.length != 0 && this.data.tokyu.length != 0) {\n\n                this.createmeisaiIndex();\n\n                console.log(this.data.meisaiIndex);\n\n            }\n\n\n        },\n        confirm: function () {\n            this.$refs['firstForm'].validate((valid) => {\n\n                if (valid) {\n\n                    this.data.pageNumber = 2;\n\n                } \n            });\n\n\n\n        },\n        print: function () {\n\n            this.$refs['firstForm'].validate((valid) => {\n\n                if (valid) {\n                    if (!window.confirm(\"印刷しますか？\")) {\n                        return false;\n                    }\n\n\n                    var postArray;\n                        if (this.data.firstForm.model.syoriKubun == 3) {\n                            \n                             postArray = {\n                                 \"paramProcKbn\": 2,\n                                 \"Computername\": \"\",\n                                 \"InputTanto\": this.$store.state.login.userCode,\n                                 \"InputTantoNm\": this.$store.state.login.userName,\n                                 \"PrintFlg\": true,\n                                 \"Nendo\": this.data.year,\n                                 \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\n                                 \"SyohinNm\": this.data.firstForm.model.syouhinName,\n                                 \"Henkobi\": \"2020/09/18\",\n                                 \"KaisiKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuBottom,\n                                 \"SyuryoKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuTop,\n                                 \"KaisiY\": \"\",\n                                 \"KaisiM\": \"\",\n                                 \"KaisiD\": \"\",\n                                 \"SyuryoY\": \"\",\n                                 \"SyuryoM\": \"\",\n                                 \"SyuryoD\": \"\"\n\n                            }\n\n\n                        } else if (this.data.firstForm.model.syoriKubun == 4) {\n\n                            var startDate = this.data.firstForm.model.sakuhyouHaniDateBottom.split(\"-\");\n\n                            var endDate = this.data.firstForm.model.sakuhyouHaniDateTop.split(\"-\");\n\n                             postArray = {\n                                 \"paramProcKbn\": 3,\n                                 \"Computername\": \"\",\n                                 \"InputTanto\": this.$store.state.login.userCode,\n                                 \"InputTantoNm\": this.$store.state.login.userName,\n                                 \"PrintFlg\": true,\n                                 \"Nendo\": this.data.year,\n                                 \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\n                                 \"SyohinNm\": this.data.firstForm.model.syouhinName,\n                                 \"Henkobi\": \"2020/09/18\",\n                                 \"KaisiKaisu\": \"\",\n                                 \"SyuryoKaisu\": \"\",\n                                 \"KaisiY\": startDate[0],\n                                 \"KaisiM\": startDate[1],\n                                 \"KaisiD\": startDate[2],\n                                 \"SyuryoY\": endDate[0],\n                                 \"SyuryoM\": endDate[1],\n                                 \"SyuryoD\": endDate[2]\n\n                             }\n                 \n                        }\n\n                        \n\n                    console.log(postArray);\n\n                    axios.post(url.tankaSyusei, postArray)\n                        .then(response => {\n                            console.log(response.data);\n                        })\n                        .catch(response => console.log(response))\n\n                    alert(\"印刷\");\n                } \n            });\n\n        },\n        preview: function () {\n            this.$refs['firstForm'].validate((valid) => {\n\n                if (valid) {\n                                            var postArray;\n                        if (this.data.firstForm.model.syoriKubun == 3) {\n                            \n                             postArray = {\n                                 \"paramProcKbn\": 2,\n                                 \"Computername\": \"\",\n                                 \"InputTanto\": this.$store.state.login.userCode,\n                                 \"InputTantoNm\": this.$store.state.login.userName,\n                                 \"PrintFlg\": true,\n                                 \"Nendo\": this.data.year,\n                                 \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\n                                 \"SyohinNm\": this.data.firstForm.model.syouhinName,\n                                 \"Henkobi\": \"2020/09/18\",\n                                 \"KaisiKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuBottom,\n                                 \"SyuryoKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuTop,\n                                 \"KaisiY\": \"\",\n                                 \"KaisiM\": \"\",\n                                 \"KaisiD\": \"\",\n                                 \"SyuryoY\": \"\",\n                                 \"SyuryoM\": \"\",\n                                 \"SyuryoD\": \"\"\n\n                            }\n\n\n                        } else if (this.data.firstForm.model.syoriKubun == 4) {\n\n                            var startDate = this.data.firstForm.model.sakuhyouHaniDateBottom.split(\"-\");\n\n                            var endDate = this.data.firstForm.model.sakuhyouHaniDateTop.split(\"-\");\n\n                             postArray = {\n                                 \"paramProcKbn\": 3,\n                                 \"Computername\": \"\",\n                                 \"InputTanto\": this.$store.state.login.userCode,\n                                 \"InputTantoNm\": this.$store.state.login.userName,\n                                 \"PrintFlg\": true,\n                                 \"Nendo\": this.data.year,\n                                 \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\n                                 \"SyohinNm\": this.data.firstForm.model.syouhinName,\n                                 \"Henkobi\": \"2020/09/18\",\n                                 \"KaisiKaisu\": \"\",\n                                 \"SyuryoKaisu\": \"\",\n                                 \"KaisiY\": startDate[0],\n                                 \"KaisiM\": startDate[1],\n                                 \"KaisiD\": startDate[2],\n                                 \"SyuryoY\": endDate[0],\n                                 \"SyuryoM\": endDate[1],\n                                 \"SyuryoD\": endDate[2]\n\n                             }\n                 \n                        }\n\n                        \n\n                    axios.post(url.tankaSyusei, postArray)\n                        .then(response => {\n                            console.log(response.data);\n                        })\n                        .catch(response => console.log(response))\n\n\n                        alert(\"プレビュー\");\n                } \n            });\n        },\n        clear: function () {\n\n            if (this.data.updateFlag == 1) {\n\n                if (!window.confirm(\"変更が保存されていませんがよろしいですか？\")) {\n                    return false;\n                }\n            }\n\n            this.data.meisai = [];\n\n\n        },\n        update: function () {\n\n            if (!window.confirm(\"更新しますか？\")) {\n                return false;\n            }\n            alert(\"アップデート\");\n\n        },\n        finish: function () {\n            alert(\"終了\");\n        },\n    \n    },\n    watch: {\n        \"data.firstForm.model.syoriKubun\": function (new_value) {\n            \n            if (new_value == 4) {\n                this.data.firstForm.validation.syouhinCode[0].required = false;\n            } else {\n                this.data.firstForm.validation.syouhinCode[0].required = true;\n            }\n\n            if (new_value == 3) {\n                this.data.firstForm.validation.sakuhyouHaniKaisuBottom[0].required = true;\n                this.data.firstForm.validation.sakuhyouHaniKaisuTop[0].required = true;\n            } else {\n                this.data.firstForm.validation.sakuhyouHaniKaisuBottom[0].required = false;\n                this.data.firstForm.validation.sakuhyouHaniKaisuTop[0].required = false;\n            }\n\n\n           if (new_value == 4) {\n                this.data.firstForm.validation.sakuhyouHaniDateBottom[0].required = true;\n                this.data.firstForm.validation.sakuhyouHaniDateTop[0].required = true;\n            } else {\n                this.data.firstForm.validation.sakuhyouHaniDateBottom[0].required = false;\n                this.data.firstForm.validation.sakuhyouHaniDateTop[0].required = false;\n            }\n\n        },\n    },\n    created: function () {\n\n        //※axiosでとってくる\n        this.data.year = 2020;\n\n        axios.get(url.meisyoMaster)\n            .then(response => {\n                for (var i = 0; i < response.data.length; i++) {\n                    if (response.data[i].meisyoCD == \"3\") {\n                        this.data.size.push({ SizeMei: response.data[i].meisyo, Size: response.data[i].atai });\n\n                    }\n                }\n\n\n                this.afterCreatedData();\n\n            })\n            .catch(response => console.log(response))\n\n        axios.get(url.meisyoMaster)\n            .then(response => {\n                for (var i = 0; i < response.data.length; i++) {\n                    if (response.data[i].meisyoCD == \"2\") {\n                        this.data.hinsyu.push({ HinsyuMei: response.data[i].meisyo, Hinsyu: response.data[i].atai });\n\n                    }\n                }\n\n                this.afterCreatedData();\n\n            })\n            .catch(response => console.log(response))\n\n        axios.get(url.meisyoMaster)\n            .then(response => {\n                for (var i = 0; i < response.data.length; i++) {\n                    if (response.data[i].meisyoCD == \"4\") {\n                        this.data.tokyu.push({ TokyuMei: response.data[i].meisyo, Tokyu: response.data[i].atai });\n\n                    }\n                }\n\n                this.afterCreatedData();\n\n            })\n            .catch(response => console.log(response))\n\n    }\n}\n",{"version":3,"sources":["TankaSyusei.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA","file":"TankaSyusei.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div>\r\n        <keyboard-events v-on:keydown=\"keyboardEvent\"></keyboard-events>\r\n        <el-card v-if=\"data.pageNumber == 1\">\r\n            <div slot='header'>\r\n                <span>出荷単価修正</span>\r\n            </div>\r\n            <div slot='default'>\r\n                <el-form :model=\"data.firstForm.model\" :rules=\"data.firstForm.validation\" ref=\"firstForm\" label-width=\"120px\">\r\n                    <div class='row'>\r\n                        <div class='col-md-3'>\r\n                            <label for='処理区分' class='col-form-label px-1' style='width:100%;'>処理区分</label>\r\n                            <el-form-item label-width=\"0\" prop=\"syoriKubun\">\r\n                                <el-select v-model=\"data.firstForm.model.syoriKubun\">\r\n                                    <el-option :value='1' label=\"1:単価集計\"></el-option>\r\n                                    <el-option :value='2' label=\"2:単価修正\"></el-option>\r\n                                    <el-option :value='3' label=\"3:作表\"></el-option>\r\n                                    <el-option :value='4' label=\"4:単価集計エラーリスト\"></el-option>\r\n                                </el-select>\r\n                            </el-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <div class='col-md-8' style=\"margin-top:2%;\">\r\n                            <!--インクリメントサーチ-->\r\n                            <label for='商品区分' class='col-form-label px-1' style='width:100%;'>商品区分</label>\r\n                            <el-form-item label-width=\"0\" prop=\"syouhinCode\">\r\n                                <el-increment-search v-model=\"data.firstForm.model.syouhinCode\"\r\n                                                     style='width:15%; margin-right:0.5%;'\r\n                                                     :display=\"[{key:'syohinmei',name:'名前'}]\"\r\n                                                     :autoComplete=\"['syohinmei']\"\r\n                                                     :kind=\"'商品'\"\r\n                                                     :required=\"true\"\r\n                                                     :disabled=\"data.firstForm.model.syoriKubun == 4\"\r\n                                                     @update=\"(r) => data.firstForm.model.syouhinName = r.syohinmei\"></el-increment-search>\r\n\r\n                                <el-input type='text'\r\n                                          style='width:30%;margin-right:2%;'\r\n                                          v-model=\"data.firstForm.model.syouhinName\"\r\n                                          readonly></el-input>\r\n                            </el-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <div class='row' style=\"margin-top:2%;\">\r\n                        <div class='col-md-6'>\r\n                            <label for='' class='col-form-label px-1' style='width:100%;'>作表範囲(回数)</label>\r\n                            <el-form-item label-width=\"0\" prop=\"sakuhyouHaniKaisuBottom\" style='width:40%;margin-right:2%;display:inline-block;'>\r\n                                <el-input-number style=\"width:100%;display:block;\"\r\n                                                 controls-position=\"right\"\r\n                                                 v-model='data.firstForm.model.sakuhyouHaniKaisuBottom' :disabled=\"data.firstForm.model.syoriKubun != 3\" :min=\"0\" :max=\"data.firstForm.model.sakuhyouHaniKaisuTop\"></el-input-number>\r\n                            </el-form-item>\r\n                            <span style='margin-right:2%;'>～</span>\r\n                            <el-form-item label-width=\"0\" prop=\"sakuhyouHaniKaisuTop\" style='width:40%;margin-right:2%;display:inline-block;'>\r\n\r\n                                <el-input-number style=\"width:100%;display:block;\"\r\n                                                 controls-position=\"right\"\r\n                                                 v-model='data.firstForm.model.sakuhyouHaniKaisuTop' :disabled=\"data.firstForm.model.syoriKubun != 3\" :min=\"data.firstForm.model.sakuhyouHaniKaisuBottom\" :max=\"99\"></el-input-number>\r\n                            </el-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <div class='row' style=\"margin-top:2%;\">\r\n                        <div class='col-md-6'>\r\n                            <label for='作表範囲(処理日)' class='col-form-label px-1'>作表範囲(処理日)</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class='row'>\r\n                        <div class='col-md-6'>\r\n                            <label for='抽出開始日' class='col-form-label px-1' style='width:100%;'>抽出開始日</label>\r\n                            <el-form-item label-width=\"0\" prop=\"sakuhyouHaniDateBottom\">\r\n                                <el-input type='date'\r\n                                          v-model=\"data.firstForm.model.sakuhyouHaniDateBottom\" :disabled=\"data.firstForm.model.syoriKubun != 4\" :min=\"'0001-01-01'\" :max=\"data.firstForm.model.sakuhyouHaniDateTop\"></el-input>\r\n                            </el-form-item>\r\n                        </div>\r\n                    </div>\r\n                    <div class='row' style=\"margin-top:0.5%;\">\r\n                        <div class='col-md-6'>\r\n                            <label for='抽出終了日' class='col-form-label px-1' style='width:100%;'>抽出終了日</label>\r\n                            <el-form-item label-width=\"0\" prop=\"sakuhyouHaniDateTop\">\r\n                                <el-input type='date'\r\n                                          v-model=\"data.firstForm.model.sakuhyouHaniDateTop\" :disabled=\"data.firstForm.model.syoriKubun != 4\" :min=\"data.firstForm.model.sakuhyouHaniDateBottom\" :max=\"'9999-12-31'\"></el-input>\r\n                            </el-form-item>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class='row' style=\"margin-top:2%;\">\r\n                        <div class='col-md-12'>\r\n                            <div style='text-align:right;width:100%;'>\r\n                                <el-button style='margin-left:2%;' type='warning' v-on:click=\"syukei\" :disabled=\"data.firstForm.model.syoriKubun != 1\">集計実行(F9)</el-button>\r\n                                <el-button style='margin-left:2%;' type='danger' v-on:click=\"print\" :disabled=\"!(data.firstForm.model.syoriKubun == 3 || data.firstForm.model.syoriKubun == 4)\">印刷(F10)</el-button>\r\n                                <el-button style='margin-left:2%;' type='success' v-on:click=\"preview\" :disabled=\"!(data.firstForm.model.syoriKubun == 3 || data.firstForm.model.syoriKubun == 4)\">表示(F11)</el-button>\r\n                                <el-button style='margin-left:2%;' type='primary' v-on:click=\"confirm\" :disabled=\"data.firstForm.model.syoriKubun != 2\">確認(F5)</el-button>\r\n                                <el-button style='margin-left:2%;' type='info' v-on:click=\"finish\">終了(F12)</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </el-form>\r\n            </div>\r\n        </el-card>\r\n        <el-card v-if=\"data.pageNumber == 2\">\r\n            <div slot='header'>\r\n                <span>単価修正</span>\r\n            </div>\r\n            <div slot='default'>\r\n                <form id=\"niukeNyuryokuForm\" v-focus-first-on-load v-focus-next-on-enter class='vld-parent'>\r\n                    <div class=\"row\">\r\n                        <div class='col-md-3'>\r\n                            <!--インクリメントサーチ-->\r\n                            <label for='商品区分' class='col-form-label px-1' style='width:100%;'>商品区分</label>\r\n                            <el-select style='width:40%; margin-right:0.5%;' v-model=\"data.firstForm.syouhinCode\" readonly>\r\n                                <el-option value='1' label=\"1\"></el-option>\r\n                                <el-option value='9' label=\"9\"></el-option>\r\n                            </el-select>\r\n                            <el-input type='text'\r\n                                      style='width:55%;margin-right:2%;'\r\n                                      v-model=\"data.firstForm.syouhinName\"\r\n                                      readonly></el-input>\r\n                        </div>\r\n                        <div class='col-md-4'>\r\n                            <label for='処理区分' class='col-form-label px-1' style='width:100%;'>処理回数</label>\r\n                            <el-input-number\r\n                                      v-model=\"data.syoriKaisu\"\r\n                                      @change=\"syoriKaisuChange\"\r\n                                      @focus=\"updateCheck($event.target)\"\r\n                                      ></el-input-number>\r\n\r\n                       </div>\r\n                    </div>\r\n                    <div class='row' style=\"margin:2%;white-space:nowrap;overflow-x:scroll;\">\r\n                        <table class=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>品種</th>\r\n                                    <th>等級</th>\r\n                                    <th v-for=\"size in data.size\" v-bind:key=\"size.number\">{{size.SizeMei}}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th></th>\r\n                                    <th></th>\r\n                                    <th v-for=\"size in data.size\" v-bind:key=\"size.number\">{{size.Size}}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody v-for=\"hinsyu in data.hinsyu\" v-bind:key=\"hinsyu.number\">\r\n                                <tr v-for=\"(tokyu,tokyu_index) in getTokyuTr()\" v-bind:key=\"tokyu.number\">\r\n                                    <td><span v-if=\"tokyu_index % 2 == 0\">{{hinsyu.HinsyuMei}}</span></td>\r\n                                    <td><span v-if=\"tokyu_index % 2 == 0\">{{tokyu.TokyuMei}}</span></td>\r\n                                    <td v-for=\"size in data.size\" v-bind:key=\"size.number\">\r\n                                        <span v-if=\"tokyu_index % 2 == 0\">{{getMeisaiData(hinsyu.Hinsyu,tokyu.Tokyu,size.Size) != null ? getMeisaiData(hinsyu.Hinsyu,tokyu.Tokyu,size.Size).SyukeiTanka : \"\"}}</span>\r\n                                        <el-input-number v-if=\"tokyu_index % 2 == 1 && getMeisaiData(hinsyu.Hinsyu,tokyu.Tokyu,size.Size) != null\"\r\n                                                         v-model=\"getMeisaiData(hinsyu.Hinsyu,tokyu.Tokyu,size.Size).Tanka\"\r\n                                                         type=\"text\"\r\n                                                         @change=\"data.updateFlag = 1\"\r\n                                                         :precision=\"2\" :step=\"0.1\"\r\n                                                         controls-position=\"right\">\r\n                                        </el-input-number>\r\n\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <div class='row' style=\"margin-top:2%;\">\r\n                        <div class='col-md-12'>\r\n                            <div style='text-align:right;width:100%;'>\r\n                                <el-button style='margin-left:2%;' type='warning' v-on:click=\"update\">更新(F9)</el-button>\r\n                                <el-button style='margin-left:2%;' type='danger' v-on:click=\"clear\" >画面クリア(F10)</el-button>\r\n                                <el-button style='margin-left:2%;' type='info' v-on:click=\"finish\">終了(F12)</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    // @ is an alias to /src\r\n    import KeyboardEvents from '@/components/KeyboardEvents.vue'\r\n    import config from '@/config.js'\r\n    import url from '@/js/api_url.js'\r\n    import ElIncrementSearch from '@/components/IncrementSearch.vue'\r\n    export default {\r\n        name: 'niukeMonitorList',\r\n        components: {\r\n            KeyboardEvents, ElIncrementSearch\r\n        },\r\n        data: function () {\r\n            return {\r\n                data: {\r\n                    pageNumber: 1,\r\n                    firstForm: {\r\n                        model: {\r\n                            syoriKubun: 1,\r\n                            syouhinCode: \"\",\r\n                            syouhinName: \"\",\r\n                            sakuhyouHaniKaisuTop: 0,\r\n                            sakuhyouHaniKaisuBottom: 99,\r\n                            sakuhyouHanidateTop: \"\",\r\n                            sakuhyouHanidateBottom: \"\",\r\n                        },\r\n                        validation: {\r\n                          syoriKubun: [\r\n                                { required: true, message: '処理区分が入力されていません', trigger: 'blur' },\r\n                            ],\r\n                            syouhinCode: [\r\n                                { required: true, message: '商品区分が入力されていません' },\r\n                            ],\r\n                            sakuhyouHaniKaisuTop: [\r\n                                { required: false, message: '作表範囲(回数)が入力されていません' },\r\n                            ],\r\n                            sakuhyouHaniKaisuBottom: [\r\n                                { required: false, message: '作表範囲(回数)が入力されていません' },\r\n                            ],\r\n                            sakuhyouHaniDateTop: [\r\n                                { required: false, message: '抽出終了日が入力されていません' },\r\n                            ],\r\n                            sakuhyouHaniDateBottom: [\r\n                                { required: false, message: '抽出開始日が入力されていません' },\r\n                            ]\r\n\r\n                        },\r\n                    },\r\n                    year: null,\r\n                    syoriKaisu: 0,\r\n                    updateFlag: 0,\r\n                    size: [\r\n                    ],\r\n                    tokyu: [\r\n\r\n                    ],\r\n                    hinsyu: [\r\n\r\n                    ],\r\n                    meisai: [\r\n\r\n                    ],\r\n                    meisaiIndex: {\r\n\r\n                    },\r\n\r\n\r\n\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            keyboardEvent(e) {\r\n                if (e.keyCode == config.KEY_CODES.F5) {\r\n                    if (this.data.firstForm.syoriKubun == 2) {\r\n                        this.data.pageNumber = 2;\r\n                    }\r\n                }\r\n                if (e.keyCode == config.KEY_CODES.F9) {\r\n                    if (this.data.pageNumber == 1) {\r\n                        if (this.data.firstForm.syoriKubun == 1) {\r\n                            this.syukei()\r\n                        }\r\n                    } else if (this.data.pageNumber == 2) {\r\n                        this.update();\r\n                    }\r\n                    \r\n                }\r\n                if (e.keyCode == config.KEY_CODES.F10) {\r\n                    if (this.data.pageNumber == 1) {\r\n\r\n                        if (this.data.firstForm.syoriKubun == 3 || this.data.firstForm.syoriKubun == 4) {\r\n                            this.print()\r\n                        }\r\n                    } else if (this.data.pageNumber == 2) {\r\n                        this.clear();\r\n                    }\r\n                 \r\n                }\r\n                if (e.keyCode == config.KEY_CODES.F11) {\r\n                    if (this.data.firstForm.syoriKubun == 3 || this.data.firstForm.syoriKubun == 4) {\r\n                        this.preview()\r\n                    }\r\n                }\r\n                if (e.keyCode == config.KEY_CODES.F12) {\r\n                    this.finish()\r\n                }\r\n            },\r\n           //処理回数の変更、ここでjsonを取ってくる処理\r\n            syoriKaisuChange: function () {\r\n\r\n\r\n                //axios.get(url.tankaSyusei,\r\n                    //{\r\n                  //      paramProcKbn:1,\r\n                  //      paramNendo: this.data.year,\r\n                  //      paramSyohin: this.data.firstForm.syouhinCode,\r\n                  //      paramKaisu: this.data.syoriKaisu,\r\n                  //      paramHinsyu:this.data.,\r\n                  //      paramTokyu = 1\r\n                  //  })\r\n                  //  .then(response => {\r\n                  //      console.log(response.data);\r\n                  //  })\r\n                  //  .catch(response => console.log(response))\r\n\r\n                //※明細の取得\r\n                this.data.meisai = [\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"1\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '1', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"7\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"1\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"1\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"2\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"3\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"4\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"5\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"6\", Sizemei: \"4L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n                    { Hinsyu: '2', Hinsyumei: \"三社\", Tokyu: \"2\", Tokyumei: \"上\", Size: \"7\", Sizemei: \"5L\", Irisu: 5, Tanka: 100.2, SyukeiTanka: 1000 },\r\n\r\n                ];\r\n                this.createmeisaiIndex();\r\n\r\n                //updateFlagをもとに戻す\r\n                this.data.updateFlag = 0;\r\n            },\r\n            createmeisaiIndex: function () {\r\n               \r\n                for (var i in this.data.hinsyu) {\r\n                    var hinsyuCode = this.data.hinsyu[i].Hinsyu\r\n\r\n                    this.data.meisaiIndex[hinsyuCode] = {};\r\n\r\n                    for (var k in this.data.tokyu) {\r\n\r\n                        var tokyuCode = this.data.tokyu[k].Tokyu\r\n                        this.data.meisaiIndex[hinsyuCode][tokyuCode] = {};\r\n\r\n                        for (var l in this.data.size) {\r\n                            var sizeCode = this.data.size[l].Size;\r\n                            this.data.meisaiIndex[hinsyuCode][tokyuCode][sizeCode] = null;\r\n\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n                for (var i = 0; i < this.data.meisai.length; i++) {\r\n\r\n                    var meisai = this.data.meisai[i];\r\n\r\n                    this.data.meisaiIndex[meisai.Hinsyu][meisai.Tokyu][meisai.Size] = i;\r\n                        \r\n                    \r\n\r\n                }\r\n\r\n            },\r\n            getTokyuTr: function () {\r\n                var result = [];\r\n                for (var i in this.data.tokyu) {\r\n\r\n                    result.push(this.data.tokyu[i]);\r\n                    result.push(this.data.tokyu[i]);\r\n                }\r\n                return result;\r\n            },\r\n            getMeisaiData: function (hinsyu, tokyu, size) {\r\n\r\n                var meisaiIndex = this.data.meisaiIndex[hinsyu][tokyu][size];\r\n                if (meisaiIndex != null) {\r\n                    return this.data.meisai[meisaiIndex];\r\n                } else {\r\n                    return null;\r\n                }\r\n\r\n                \r\n            },\r\n            updateCheck: function (input) {\r\n\r\n                if (this.data.updateFlag == 1) {\r\n\r\n                    if (!window.confirm(\"変更が保存されていませんがよろしいですか？\")) {\r\n                        input.blur();\r\n                    }\r\n                }\r\n            },\r\n            syukei: function () {\r\n                this.$refs['firstForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n                        if (!window.confirm(\"単価集計を実行しますか？\")) {\r\n                            return false;\r\n                        }\r\n\r\n\r\n                        var postArray = {\r\n                                \"paramProcKbn\": 1,\r\n                               \"Computername\":\"\",\r\n                                \"InputTanto\": this.$store.state.login.userCode,\r\n                                \"InputTantoNm\": this.$store.state.login.userName,\r\n                                \"PrintFlg\": false,\r\n                                \"Nendo\": this.data.year,\r\n                                \"SyohinKbn\": this.data.syouhinCode,\r\n                                \"SyohinNm\": this.data.syouhinName,\r\n                                \"Henkobi\": \"2020/09/18\",\r\n                                \"KaisiKaisu\": \"\",\r\n                                \"SyuryoKaisu\": \"\",\r\n                                \"KaisiY\": \"\",\r\n                                \"KaisiM\": \"\",\r\n                                \"KaisiD\": \"\",\r\n                                \"SyuryoY\": \"\",\r\n                                \"SyuryoM\": \"\",\r\n                                \"SyuryoD\": \"\"\r\n                        }\r\n\r\n                        axios.post(url.tankaSyusei, postArray)\r\n                            .then(response => {\r\n                                console.log(response.data);\r\n                            })\r\n                            .catch(response => console.log(response))\r\n\r\n                        alert(\"集計処理\");\r\n\r\n                    } \r\n                });\r\n\r\n\r\n  \r\n            },\r\n            afterCreatedData: function () {\r\n\r\n                if (this.data.size.length != 0 && this.data.hinsyu.length != 0 && this.data.tokyu.length != 0) {\r\n\r\n                    this.createmeisaiIndex();\r\n\r\n                    console.log(this.data.meisaiIndex);\r\n\r\n                }\r\n\r\n\r\n            },\r\n            confirm: function () {\r\n                this.$refs['firstForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n\r\n                        this.data.pageNumber = 2;\r\n\r\n                    } \r\n                });\r\n\r\n\r\n\r\n            },\r\n            print: function () {\r\n\r\n                this.$refs['firstForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n                        if (!window.confirm(\"印刷しますか？\")) {\r\n                            return false;\r\n                        }\r\n\r\n\r\n                        var postArray;\r\n                            if (this.data.firstForm.model.syoriKubun == 3) {\r\n                                \r\n                                 postArray = {\r\n                                     \"paramProcKbn\": 2,\r\n                                     \"Computername\": \"\",\r\n                                     \"InputTanto\": this.$store.state.login.userCode,\r\n                                     \"InputTantoNm\": this.$store.state.login.userName,\r\n                                     \"PrintFlg\": true,\r\n                                     \"Nendo\": this.data.year,\r\n                                     \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\r\n                                     \"SyohinNm\": this.data.firstForm.model.syouhinName,\r\n                                     \"Henkobi\": \"2020/09/18\",\r\n                                     \"KaisiKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuBottom,\r\n                                     \"SyuryoKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuTop,\r\n                                     \"KaisiY\": \"\",\r\n                                     \"KaisiM\": \"\",\r\n                                     \"KaisiD\": \"\",\r\n                                     \"SyuryoY\": \"\",\r\n                                     \"SyuryoM\": \"\",\r\n                                     \"SyuryoD\": \"\"\r\n\r\n                                }\r\n\r\n\r\n                            } else if (this.data.firstForm.model.syoriKubun == 4) {\r\n\r\n                                var startDate = this.data.firstForm.model.sakuhyouHaniDateBottom.split(\"-\");\r\n\r\n                                var endDate = this.data.firstForm.model.sakuhyouHaniDateTop.split(\"-\");\r\n\r\n                                 postArray = {\r\n                                     \"paramProcKbn\": 3,\r\n                                     \"Computername\": \"\",\r\n                                     \"InputTanto\": this.$store.state.login.userCode,\r\n                                     \"InputTantoNm\": this.$store.state.login.userName,\r\n                                     \"PrintFlg\": true,\r\n                                     \"Nendo\": this.data.year,\r\n                                     \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\r\n                                     \"SyohinNm\": this.data.firstForm.model.syouhinName,\r\n                                     \"Henkobi\": \"2020/09/18\",\r\n                                     \"KaisiKaisu\": \"\",\r\n                                     \"SyuryoKaisu\": \"\",\r\n                                     \"KaisiY\": startDate[0],\r\n                                     \"KaisiM\": startDate[1],\r\n                                     \"KaisiD\": startDate[2],\r\n                                     \"SyuryoY\": endDate[0],\r\n                                     \"SyuryoM\": endDate[1],\r\n                                     \"SyuryoD\": endDate[2]\r\n\r\n                                 }\r\n                     \r\n                            }\r\n\r\n                            \r\n\r\n                        console.log(postArray);\r\n\r\n                        axios.post(url.tankaSyusei, postArray)\r\n                            .then(response => {\r\n                                console.log(response.data);\r\n                            })\r\n                            .catch(response => console.log(response))\r\n\r\n                        alert(\"印刷\");\r\n                    } \r\n                });\r\n\r\n            },\r\n            preview: function () {\r\n                this.$refs['firstForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n                                                var postArray;\r\n                            if (this.data.firstForm.model.syoriKubun == 3) {\r\n                                \r\n                                 postArray = {\r\n                                     \"paramProcKbn\": 2,\r\n                                     \"Computername\": \"\",\r\n                                     \"InputTanto\": this.$store.state.login.userCode,\r\n                                     \"InputTantoNm\": this.$store.state.login.userName,\r\n                                     \"PrintFlg\": true,\r\n                                     \"Nendo\": this.data.year,\r\n                                     \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\r\n                                     \"SyohinNm\": this.data.firstForm.model.syouhinName,\r\n                                     \"Henkobi\": \"2020/09/18\",\r\n                                     \"KaisiKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuBottom,\r\n                                     \"SyuryoKaisu\": this.data.firstForm.model.sakuhyouHaniKaisuTop,\r\n                                     \"KaisiY\": \"\",\r\n                                     \"KaisiM\": \"\",\r\n                                     \"KaisiD\": \"\",\r\n                                     \"SyuryoY\": \"\",\r\n                                     \"SyuryoM\": \"\",\r\n                                     \"SyuryoD\": \"\"\r\n\r\n                                }\r\n\r\n\r\n                            } else if (this.data.firstForm.model.syoriKubun == 4) {\r\n\r\n                                var startDate = this.data.firstForm.model.sakuhyouHaniDateBottom.split(\"-\");\r\n\r\n                                var endDate = this.data.firstForm.model.sakuhyouHaniDateTop.split(\"-\");\r\n\r\n                                 postArray = {\r\n                                     \"paramProcKbn\": 3,\r\n                                     \"Computername\": \"\",\r\n                                     \"InputTanto\": this.$store.state.login.userCode,\r\n                                     \"InputTantoNm\": this.$store.state.login.userName,\r\n                                     \"PrintFlg\": true,\r\n                                     \"Nendo\": this.data.year,\r\n                                     \"SyohinKbn\": this.data.firstForm.model.syouhinCode,\r\n                                     \"SyohinNm\": this.data.firstForm.model.syouhinName,\r\n                                     \"Henkobi\": \"2020/09/18\",\r\n                                     \"KaisiKaisu\": \"\",\r\n                                     \"SyuryoKaisu\": \"\",\r\n                                     \"KaisiY\": startDate[0],\r\n                                     \"KaisiM\": startDate[1],\r\n                                     \"KaisiD\": startDate[2],\r\n                                     \"SyuryoY\": endDate[0],\r\n                                     \"SyuryoM\": endDate[1],\r\n                                     \"SyuryoD\": endDate[2]\r\n\r\n                                 }\r\n                     \r\n                            }\r\n\r\n                            \r\n\r\n                        axios.post(url.tankaSyusei, postArray)\r\n                            .then(response => {\r\n                                console.log(response.data);\r\n                            })\r\n                            .catch(response => console.log(response))\r\n\r\n\r\n                            alert(\"プレビュー\");\r\n                    } \r\n                });\r\n            },\r\n            clear: function () {\r\n\r\n                if (this.data.updateFlag == 1) {\r\n\r\n                    if (!window.confirm(\"変更が保存されていませんがよろしいですか？\")) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                this.data.meisai = [];\r\n\r\n\r\n            },\r\n            update: function () {\r\n\r\n                if (!window.confirm(\"更新しますか？\")) {\r\n                    return false;\r\n                }\r\n                alert(\"アップデート\");\r\n\r\n            },\r\n            finish: function () {\r\n                alert(\"終了\");\r\n            },\r\n        \r\n        },\r\n        watch: {\r\n            \"data.firstForm.model.syoriKubun\": function (new_value) {\r\n                \r\n                if (new_value == 4) {\r\n                    this.data.firstForm.validation.syouhinCode[0].required = false;\r\n                } else {\r\n                    this.data.firstForm.validation.syouhinCode[0].required = true;\r\n                }\r\n\r\n                if (new_value == 3) {\r\n                    this.data.firstForm.validation.sakuhyouHaniKaisuBottom[0].required = true;\r\n                    this.data.firstForm.validation.sakuhyouHaniKaisuTop[0].required = true;\r\n                } else {\r\n                    this.data.firstForm.validation.sakuhyouHaniKaisuBottom[0].required = false;\r\n                    this.data.firstForm.validation.sakuhyouHaniKaisuTop[0].required = false;\r\n                }\r\n\r\n\r\n               if (new_value == 4) {\r\n                    this.data.firstForm.validation.sakuhyouHaniDateBottom[0].required = true;\r\n                    this.data.firstForm.validation.sakuhyouHaniDateTop[0].required = true;\r\n                } else {\r\n                    this.data.firstForm.validation.sakuhyouHaniDateBottom[0].required = false;\r\n                    this.data.firstForm.validation.sakuhyouHaniDateTop[0].required = false;\r\n                }\r\n\r\n            },\r\n        },\r\n        created: function () {\r\n\r\n            //※axiosでとってくる\r\n            this.data.year = 2020;\r\n\r\n            axios.get(url.meisyoMaster)\r\n                .then(response => {\r\n                    for (var i = 0; i < response.data.length; i++) {\r\n                        if (response.data[i].meisyoCD == \"3\") {\r\n                            this.data.size.push({ SizeMei: response.data[i].meisyo, Size: response.data[i].atai });\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n                    this.afterCreatedData();\r\n\r\n                })\r\n                .catch(response => console.log(response))\r\n\r\n            axios.get(url.meisyoMaster)\r\n                .then(response => {\r\n                    for (var i = 0; i < response.data.length; i++) {\r\n                        if (response.data[i].meisyoCD == \"2\") {\r\n                            this.data.hinsyu.push({ HinsyuMei: response.data[i].meisyo, Hinsyu: response.data[i].atai });\r\n\r\n                        }\r\n                    }\r\n\r\n                    this.afterCreatedData();\r\n\r\n                })\r\n                .catch(response => console.log(response))\r\n\r\n            axios.get(url.meisyoMaster)\r\n                .then(response => {\r\n                    for (var i = 0; i < response.data.length; i++) {\r\n                        if (response.data[i].meisyoCD == \"4\") {\r\n                            this.data.tokyu.push({ TokyuMei: response.data[i].meisyo, Tokyu: response.data[i].atai });\r\n\r\n                        }\r\n                    }\r\n\r\n                    this.afterCreatedData();\r\n\r\n                })\r\n                .catch(response => console.log(response))\r\n\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n\r\n    .blue input{\r\n        color:blue\r\n    }\r\n    .pink input{\r\n        color:magenta\r\n    }\r\n\r\n</style>"]}]}