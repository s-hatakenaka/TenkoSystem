{"remainingRequest":"C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\src\\pages\\MasterMember.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\src\\pages\\MasterMember.vue","mtime":1603716296577},{"path":"C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\babel-loader\\lib\\index.js","mtime":1603716209870},{"path":"C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1603716212749},{"path":"C:\\Users\\shhok\\source\\repos\\Uedaunyu-Tenkosystem\\UedaunyuProject\\UedaunyuProject\\node_modules\\vue-loader\\lib\\index.js","mtime":1603716290397}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// @ is an alias to /src\nimport Card from '@/components/Card/Card.vue'\nimport config from '@/config.js'\nimport ElIncrementSearch from '@/components/IncrementSearch.vue'\nimport arrayFunction from '@/js/array.js'\nimport url from '@/js/api_url.js'\n\nexport default {\n    name: 'niukeSyukei',\n    components: {\n        Card, ElIncrementSearch\n    },\n    data: function () {\n        return {\n            data: {\n                search: {\n                    model: {\n                        memberName:\"\"\n                    },\n                    validation: {\n                        memberName: [\n                            { required: true, message: '社員名が入力されていません', trigger: 'blur' },\n                        ],\n                    }\n                },\n                master: {\n                    model: {\n                        meisai: [],\n                    },\n                },\n                updateButton: \"\",\n            },\n        }\n    },\n    methods: {\n        finish: function () {\n            alert(\"終了\");\n        },\n        masterCodeOverLap: function (meisai) {\n            \n            //※dbと接続したらここを記述\n            \n            axios.get(url.meisyoMaster)\n                .then(response => {\n\n                    if (arrayFunction.isCodeOverLap(meisai.MemberCode, \"MemberCode\", response.data)) {\n\n                        alert(\"入力されたコードは既に存在します\");\n                        meisai.MemberCode = \"\";\n\n                    } \n\n                })\n                .catch(response => console.log(response))\n                \n\n        },\n        createMeisaiData: function (ID, MemberCode, MemberName, VehicleID, IsDriver, IsRollCaller, RoleID) {\n\n            return {\n                ID: ID,\n                MemberCode: MemberCode,\n                MemberName: MemberName,\n                VehicleID: VehicleID,\n                IsDriver: IsDriver,\n                IsRollCaller: IsRollCaller,\n                RoleID: RoleID,\n            }\n        },\n        addMeisai: function (ID,MemberCode,MemberName,VehicleID,IsDriver,IsRollCaller,RoleID) {\n\n            var meisai = this.createMeisaiData(ID, MemberCode, MemberName, VehicleID, IsDriver, IsRollCaller, RoleID);\n            this.data.master.model.meisai.push(meisai);\n        },\n        submit: function () {\n\n            this.$refs['masterForm'].validate((valid) => {\n\n                if (valid) {\n\n                    \n                    //※axiosによる更新処理\n                    /*\n                    var meisyo = this.data.meisyo.model\n\n                    var postArray = {\n                        \"meisyoCD\": meisyo.meisyoCD,\n                        \"atai\": meisyo.atai,\n                        \"meisyo\": meisyo.meisyo,\n                        \"setumei\": meisyo.setumei,\n                        \"komokuSetumei\": meisyo.komokuSetumei,\n                        \"Nyuryokutantocd\": this.$store.state.login.userCode\n\n                    }\n\n                    console.log(postArray)\n\n                    if (this.data.search.model.syoriKubun == 0) {\n\n                        axios.post(url.meisyoMaster, postArray)\n                            .then(response => {\n                                this.$message({\n                                    message: '登録に成功しました',\n                                    type: 'success'\n                                });\n                            })\n                            .catch(response => {\n                                this.$message({\n                                    message: '登録に失敗しました',\n                                    type: 'error'\n                                });\n                            });\n\n\n                        for (var i in this.data.meisyo.model) {\n                            this.data.meisyo.model[i] = \"\"\n                        }\n                        this.data.autofocus.meisyoCodeSeisansya = true;\n\n\n                    } else {\n\n                        if (this.data.search.model.syoriKubun == 1) {\n\n                            axios.put(url.meisyoMaster, postArray)\n                                .then(response => {\n                                    this.$message({\n                                        message: '修正に成功しました',\n                                        type: 'success'\n                                    });\n                                })\n                                .catch(response => {\n                                    this.$message({\n                                        message: '修正に失敗しました',\n                                        type: 'error'\n                                    });\n                                });\n\n                        } else if (this.data.search.model.syoriKubun == 2) {\n\n                            axios.delete(url.meisyoMaster, { params: postArray })\n                                .then(response => {\n                                    this.$message({\n                                        message: '削除に成功しました',\n                                        type: 'success'\n                                    });\n\n                                })\n                                .catch(response => {\n                                    this.$message({\n                                        message: '削除に失敗しました',\n                                        type: 'error'\n                                    });\n                                })\n\n\n                        }\n\n\n                        \n                    }\n                    */\n                }\n            })\n\n        }\n    },\n    created: function () {\n\n\n        //ID,MemberCode,MemberName,VehicleID,IsDriver,IsRollCaller,RoleIDの順に記載\n        this.addMeisai(0, 'member1', '畠中慎一', 1, false, true, 2);\n\n    },\n    mounted: function () {\n\n    },\n    watch: {\n\n    }\n}\n",{"version":3,"sources":["MasterMember.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA","file":"MasterMember.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div>\r\n        <el-card>\r\n            <div slot='header'>\r\n                <span>社員マスタ</span>\r\n            </div>\r\n            <div slot='default'>\r\n                <el-form :model=\"data.search.model\" :rules=\"data.search.validation\" ref=\"searchForm\" label-width=\"120px\">\r\n                    <div class=\"row\">\r\n                        <div class='col-md-3'>\r\n                            <label for='社員検索' class='col-form-label px-1' style='width:100%;'>社員名検索</label>\r\n                            <el-form-item label-width=\"0\" prop=\"syoriKubun\">\r\n                                <el-input type='text'\r\n                                          style='width:100%;'\r\n                                          v-model=\"data.search.model.memberName\"></el-input>\r\n\r\n                            </el-form-item>\r\n                        </div>\r\n                        <div class=\"col-3\">\r\n                                <el-button style='margin-left:2%;margin-top:13%;' type='warning' icon=\"el-icon-search\">検索</el-button>\r\n                        </div>\r\n                    </div>\r\n                </el-form>\r\n                <div class=\"row\" style=\"margin-top:4%;\">\r\n                    <div class=\"col-12\">\r\n                        <div style=\"text-align:right;\">\r\n                            <el-button style='margin-left:2%;width:10%;' type='danger'>保存</el-button>\r\n                        </div>\r\n                        <el-form :model=\"data.master.model\" :rules=\"data.master.validation\" ref=\"masterForm\" label-width=\"120px\">\r\n                            <div style=\"text-align:center;\">\r\n                                <el-button type='primary'\r\n                                           style='width:40%;display:inline;'\r\n                                           @click=\"addMeisai(0,'','',1,false,false,1)\">明細を追加</el-button>\r\n                            </div>\r\n                            <table class=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>\r\n                                            社員コード\r\n                                        </th>\r\n                                        <th>\r\n                                            社員名\r\n                                        </th>\r\n                                        <th>\r\n                                            デフォルト車両\r\n                                        </th>\r\n                                        <th>\r\n                                            点呼者\r\n                                        </th>\r\n                                        <th>\r\n                                            運航者\r\n                                        </th>\r\n                                        <th>\r\n                                            管理者\r\n                                        </th>\r\n\r\n                                    </tr>\r\n                                </thead>\r\n                                <tr v-for=\"meisai_data in data.master.model.meisai\">\r\n                                    <td>\r\n                                        <el-form-item label-width=\"0\"\r\n                                                      prop=\"MemberCode\"\r\n                                                      :rules=\"{\r\n                                                              required: true, message: '社員コードが入力されていません', trigger: 'blur'\r\n                                                              }\">\r\n                                            <el-input type='text'\r\n                                                      style='width:100%;'\r\n                                                      v-model=\"meisai_data.MemberCode\"\r\n                                                      @change=\"masterCodeOverLap(meisai_data)\"></el-input>\r\n                                        </el-form-item>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-form-item label-width=\"0\"\r\n                                                      prop=\"MemberName\"\r\n                                                      :rules=\"{\r\n                                                              required: true, message: '社員名が入力されていません', trigger: 'blur'\r\n                                                              }\">\r\n                                            <el-input type='text'\r\n                                                      style='width:100%;'\r\n                                                      v-model=\"meisai_data.MemberName\"\r\n                                                      ></el-input>\r\n                                        </el-form-item>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-select name=\"name\" v-model=\"meisai_data.VehicleID\">\r\n                                            <el-option :value=\"1\" label=\"石川 1005\"></el-option>\r\n                                            <el-option :value=\"2\" label=\"石川 1006\"></el-option>\r\n\r\n                                        </el-select>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-checkbox v-model=\"meisai_data.IsDriver\"></el-checkbox>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-checkbox v-model=\"meisai_data.IsRollCaller\"></el-checkbox>\r\n                                    </td>\r\n                                    <td>\r\n                                        <el-select name=\"name\" v-model=\"meisai_data.RoleID\">\r\n                                            <el-option :value=\"1\" label=\"一般\"></el-option>\r\n                                            <el-option :value=\"2\" label=\"社内管理者\"></el-option>\r\n                                            <el-option :value=\"3\" label=\"全体管理者\"></el-option>\r\n                                        </el-select>\r\n                                    </td>\r\n                                </tr>\r\n                            </table>\r\n                            <div style=\"text-align:center;\">\r\n                                <el-button type='primary'\r\n                                           style='width:40%;display:inline;'\r\n                                           @click=\"addMeisai(0,'','',1,false,false,1)\">明細を追加</el-button>\r\n                            </div>\r\n                        </el-form>\r\n                        <div style=\"text-align:right;\">\r\n                            <el-button style='margin-left:2%;width:10%;' type='danger'>保存</el-button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    // @ is an alias to /src\r\n    import Card from '@/components/Card/Card.vue'\r\n    import config from '@/config.js'\r\n    import ElIncrementSearch from '@/components/IncrementSearch.vue'\r\n    import arrayFunction from '@/js/array.js'\r\n    import url from '@/js/api_url.js'\r\n\r\n    export default {\r\n        name: 'niukeSyukei',\r\n        components: {\r\n            Card, ElIncrementSearch\r\n        },\r\n        data: function () {\r\n            return {\r\n                data: {\r\n                    search: {\r\n                        model: {\r\n                            memberName:\"\"\r\n                        },\r\n                        validation: {\r\n                            memberName: [\r\n                                { required: true, message: '社員名が入力されていません', trigger: 'blur' },\r\n                            ],\r\n                        }\r\n                    },\r\n                    master: {\r\n                        model: {\r\n                            meisai: [],\r\n                        },\r\n                    },\r\n                    updateButton: \"\",\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            finish: function () {\r\n                alert(\"終了\");\r\n            },\r\n            masterCodeOverLap: function (meisai) {\r\n                \r\n                //※dbと接続したらここを記述\r\n                \r\n                axios.get(url.meisyoMaster)\r\n                    .then(response => {\r\n\r\n                        if (arrayFunction.isCodeOverLap(meisai.MemberCode, \"MemberCode\", response.data)) {\r\n\r\n                            alert(\"入力されたコードは既に存在します\");\r\n                            meisai.MemberCode = \"\";\r\n\r\n                        } \r\n\r\n                    })\r\n                    .catch(response => console.log(response))\r\n                    \r\n\r\n            },\r\n            createMeisaiData: function (ID, MemberCode, MemberName, VehicleID, IsDriver, IsRollCaller, RoleID) {\r\n\r\n                return {\r\n                    ID: ID,\r\n                    MemberCode: MemberCode,\r\n                    MemberName: MemberName,\r\n                    VehicleID: VehicleID,\r\n                    IsDriver: IsDriver,\r\n                    IsRollCaller: IsRollCaller,\r\n                    RoleID: RoleID,\r\n                }\r\n            },\r\n            addMeisai: function (ID,MemberCode,MemberName,VehicleID,IsDriver,IsRollCaller,RoleID) {\r\n\r\n                var meisai = this.createMeisaiData(ID, MemberCode, MemberName, VehicleID, IsDriver, IsRollCaller, RoleID);\r\n                this.data.master.model.meisai.push(meisai);\r\n            },\r\n            submit: function () {\r\n\r\n                this.$refs['masterForm'].validate((valid) => {\r\n\r\n                    if (valid) {\r\n\r\n                        \r\n                        //※axiosによる更新処理\r\n                        /*\r\n                        var meisyo = this.data.meisyo.model\r\n\r\n                        var postArray = {\r\n                            \"meisyoCD\": meisyo.meisyoCD,\r\n                            \"atai\": meisyo.atai,\r\n                            \"meisyo\": meisyo.meisyo,\r\n                            \"setumei\": meisyo.setumei,\r\n                            \"komokuSetumei\": meisyo.komokuSetumei,\r\n                            \"Nyuryokutantocd\": this.$store.state.login.userCode\r\n\r\n                        }\r\n\r\n                        console.log(postArray)\r\n\r\n                        if (this.data.search.model.syoriKubun == 0) {\r\n\r\n                            axios.post(url.meisyoMaster, postArray)\r\n                                .then(response => {\r\n                                    this.$message({\r\n                                        message: '登録に成功しました',\r\n                                        type: 'success'\r\n                                    });\r\n                                })\r\n                                .catch(response => {\r\n                                    this.$message({\r\n                                        message: '登録に失敗しました',\r\n                                        type: 'error'\r\n                                    });\r\n                                });\r\n\r\n\r\n                            for (var i in this.data.meisyo.model) {\r\n                                this.data.meisyo.model[i] = \"\"\r\n                            }\r\n                            this.data.autofocus.meisyoCodeSeisansya = true;\r\n\r\n\r\n                        } else {\r\n\r\n                            if (this.data.search.model.syoriKubun == 1) {\r\n\r\n                                axios.put(url.meisyoMaster, postArray)\r\n                                    .then(response => {\r\n                                        this.$message({\r\n                                            message: '修正に成功しました',\r\n                                            type: 'success'\r\n                                        });\r\n                                    })\r\n                                    .catch(response => {\r\n                                        this.$message({\r\n                                            message: '修正に失敗しました',\r\n                                            type: 'error'\r\n                                        });\r\n                                    });\r\n\r\n                            } else if (this.data.search.model.syoriKubun == 2) {\r\n\r\n                                axios.delete(url.meisyoMaster, { params: postArray })\r\n                                    .then(response => {\r\n                                        this.$message({\r\n                                            message: '削除に成功しました',\r\n                                            type: 'success'\r\n                                        });\r\n\r\n                                    })\r\n                                    .catch(response => {\r\n                                        this.$message({\r\n                                            message: '削除に失敗しました',\r\n                                            type: 'error'\r\n                                        });\r\n                                    })\r\n\r\n\r\n                            }\r\n\r\n\r\n                            \r\n                        }\r\n                        */\r\n                    }\r\n                })\r\n\r\n            }\r\n        },\r\n        created: function () {\r\n\r\n\r\n            //ID,MemberCode,MemberName,VehicleID,IsDriver,IsRollCaller,RoleIDの順に記載\r\n            this.addMeisai(0, 'member1', '畠中慎一', 1, false, true, 2);\r\n \r\n        },\r\n        mounted: function () {\r\n\r\n        },\r\n        watch: {\r\n    \r\n        }\r\n    }\r\n</script>\r\n"]}]}